<div class="welcome">
    <h3 i18n [ngStyle]="{color: user.color ? user.color : 'unset'}">Welcome {{user.nickname}}</h3>
    <button mat-icon-button class="large" (click)="resetChatOptions()">
        <mat-icon
            color="primary"
            class="material-symbols-outlined"
            inline="true"
        >reset_settings</mat-icon>
    </button>
</div>

<div class="available-rooms">
    @if(availableRooms.length) {
        <h6 i18n>Join Public Chats</h6>
        <div class="rooms-list">
            @if(availableRooms.length < 10) {
                @for(room of availableRooms; track room) {
                    <button mat-stroked-button [routerLink]="room.id">{{room.config.roomName}} <small>({{room.size}})</small></button>
                }
            } @else {
                <!-- TODO: SHOW SEARCH IN CHATS -->
            }
        </div>        
    }
    <!-- TEMP -->
    <!-- <thx-message-input roomId="test"></thx-message-input> -->
</div>
<form class="new-room"[formGroup]="roomForm" (ngSubmit)="createAndJoinRoom()">
    <div>
        <mat-form-field>
            <mat-label i18n>Start New Chat</mat-label>
            <input formControlName="roomName" matInput maxlength="18" placeholder="Ex. holidays in Rome" value="">
        </mat-form-field>
        
        <section>
            <mat-checkbox formControlName="public" i18n>Public</mat-checkbox>
        </section>
    </div>
    
    <button mat-flat-button [disabled]="!roomForm.valid" type="submit" i18n>Enter Chat <strong>{{roomForm.value.roomName}}</strong></button>
</form>
